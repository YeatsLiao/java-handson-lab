# Java Hands-on Lab 交互式教学平台规划

## 1. 项目愿景
打造一个**可视化的 Java 在线互动学习平台**。
用户不仅能阅读 Java 代码，还能通过网页端的图形化界面，直观地理解 Java 的运行机制、算法逻辑和程序结构。将枯燥的控制台输出转化为生动的动画演示。

## 2. 核心交互体验
*   **代码与运行可视化**:
    *   **内存模型演示**: 当讲解 `int a = 10;` 或 `new Object()` 时，动态展示 Stack（栈）和 Heap（堆）的内存分配与引用关系。
    *   **流程控制动画**: 在讲解 `for` 循环或 `if` 判断时，高亮显示当前执行的代码行，并配合动画展示变量值的变化。
*   **输入输出交互**:
    *   例如 `SimpleCalculator`：提供一个网页版的计算器 UI，用户点击按钮时，右侧展示对应的 Java 逻辑代码如何被“执行”（逻辑模拟）。
*   **对比实验**:
    *   展示“错误写法”与“正确写法”的运行结果差异（例如：并发修改异常、空指针异常触发场景）。

## 3. 技术栈选型
采用 **Monorepo** 或 **前后端分离** 结构，核心展示层使用现代前端技术：
*   **前端框架**: **React 18 + TypeScript**
*   **构建工具**: **Vite**
*   **样式/动画**: **Tailwind CSS** + **Framer Motion** (用于制作内存块移动、指针指向等动画)
*   **代码展示**: **Shiki** 或 **Prism.js** (代码高亮)
*   **图解工具**: **React Flow** (用于绘制对象引用图、流程图)

## 4. 项目目录结构规划
建议重构当前仓库结构，将 Java 源码作为“资源”或“后端逻辑”，新增 `web` 目录存放前端应用。

```text
java-handson-lab/
├── web/                   # [新增] 交互式教学平台前端工程
│   ├── src/
│   │   ├── components/    # 公共组件 (内存图模拟器、控制台模拟器)
│   │   ├── pages/
│   │   │   ├── labs/      # 具体实验页面
│   │   │   │   ├── Calculator/  # 对应 SimpleCalculator
│   │   │   │   │   ├── Demo.tsx # 交互演示
│   │   │   │   │   └── Guide.mdx # 教程文档
│   │   │   │   └── ...
│   │   └── ...
│   ├── package.json
│   └── vite.config.ts
├── labs/                  # [重构] 原 Java 源码目录 (归档为标准 Java 项目)
│   ├── src/main/java/...
│   └── pom.xml
├── README.md
└── PROJECT_PLAN.md        # 本规划文件
```

## 5. 15个核心交互案例规划 (由浅入深)

### 阶段一：Java 基础 (内存与流程)
1.  **基础数据类型与内存 (Primitive Types)**
    *   **交互**: 输入不同变量值（int, boolean, char）。
    *   **可视化**: 展示 Stack Frame（栈帧），变量如何在栈中直接存储值。
2.  **引用类型与对象 (References & Objects)**
    *   **交互**: 点击 `new User("Alice")`。
    *   **可视化**: 动画展示 Stack 存储引用地址，Heap 创建对象，并画出指针指向。
3.  **方法调用栈 (Method Call Stack)**
    *   **交互**: 模拟递归调用（如阶乘计算）。
    *   **可视化**: 动态展示栈帧的压入（Push）和弹出（Pop），演示 StackOverflowError 的产生过程。
4.  **字符串常量池 (String Pool)**
    *   **交互**: 创建 `String s1 = "abc"` vs `String s2 = new String("abc")`。
    *   **可视化**: 区分 Heap 中的普通对象区和 String Constant Pool，展示引用指向的区别。
5.  **流程控制 (Loops & Branches)**
    *   **交互**: 调节 `for` 循环次数。
    *   **可视化**: 高亮代码行，配合计数器动画，实时显示局部变量 `i` 的变化。

### 阶段二：面向对象 (OOP)
6.  **继承与多态 (Polymorphism)**
    *   **交互**: 选择 `Animal a = new Dog()` 或 `new Cat()`，调用 `makeSound()`。
    *   **可视化**: 展示对象在堆中的内存布局（父类字段 + 子类字段），动态绑定方法调用的过程。
7.  **接口与实现 (Interfaces)**
    *   **交互**: "USB 插拔模拟"，将 `Mouse` 或 `Keyboard` 对象“插入” `Computer` 对象。
    *   **可视化**: 展示接口引用如何指向不同的实现类对象。
8.  **静态成员 (Static Keywords)**
    *   **交互**: 创建多个实例，修改静态变量。
    *   **可视化**: 区分 Instance Area 和 Method Area (Static Area)，展示所有实例共享同一个静态变量。

### 阶段三：集合框架 (Collections)
9.  **ArrayList 动态扩容**
    *   **交互**: 连续点击“添加元素”按钮。
    *   **可视化**: 展示数组填满后，创建一个 1.5 倍大小的新数组，并将旧数据复制过去的完整动画。
10. **LinkedList 链表操作**
    *   **交互**: 在链表中间“插入”或“删除”节点。
    *   **可视化**: 慢动作展示 `prev` 和 `next` 指针的断开与重新连接过程。
11. **HashMap Put & Get**
    *   **交互**: 输入不同的 Key-Value 对。
    *   **可视化**: 展示数组+链表/红黑树结构，计算 HashCode，定位 Bucket，以及 Hash 碰撞时的链表追加过程。

### 阶段四：进阶与并发 (Advanced)
12. **异常处理机制 (Try-Catch-Finally)**
    *   **交互**: 触发一个除零异常。
    *   **可视化**: 动画展示执行流从 try 块跳跃到 catch 块，最后无论如何执行 finally 块的路径。
13. **多线程状态 (Thread Lifecycle)**
    *   **交互**: 点击 start, sleep, wait, notify 按钮。
    *   **可视化**: 状态机图解，展示线程在 New, Runnable, Blocked, Waiting, Terminated 之间的切换。
14. **Synchronized 锁机制**
    *   **交互**: 两个线程同时尝试进入同步代码块。
    *   **可视化**: 模拟“抢锁”过程（如抢夺一把钥匙），失败的线程进入 EntryList 等待。
15. **垃圾回收 (Garbage Collection)**
    *   **交互**: 手动断开对象引用（置为 null）。
    *   **可视化**: 模拟 GC 扫描，标记不可达对象（变灰），然后清除并整理内存空间的动画。

## 6. 开发执行 SOP

### 第一阶段：项目结构重组
1.  **目录调整**：将根目录下的 `src` 和 `pom.xml` 移动到 `labs/` 目录中，保持纯净的 Java 项目结构。
2.  **前端初始化**：在根目录下创建 `web/` 目录，使用 `npm create vite@latest` 初始化 React+TS 项目。

### 第二阶段：基础组件开发
1.  **布局搭建**：实现左侧“实验目录导航”，右侧“教学与交互区”的布局。
2.  **Markdown 渲染器**：集成 MDX 或 React-Markdown，用于渲染教学文案。
3.  **代码查看器**：集成代码高亮组件，支持从文件或字符串加载 Java 代码。

### 第三阶段：首个实验 (SimpleCalculator)
1.  **迁移内容**：将 `SimpleCalculator.md` 的内容转换为网页教学文案。
2.  **开发交互 Demo**：
    *   在网页上实现一个简单的计算器界面。
    *   当用户点击 "1 + 1 =" 时，右侧代码区高亮 `add(int a, int b)` 方法。
    *   动画展示参数 `1` 和 `1` 传入方法，并返回 `2` 的过程。

### 第四阶段：批量开发交互案例
*   按照规划的 15 个案例列表，逐步迭代开发。

## 7. 下一步建议
如果你认可这份规划，请告诉我 **"开始重构项目"**，我将先帮你调整目录结构，并初始化 Web 工程。
